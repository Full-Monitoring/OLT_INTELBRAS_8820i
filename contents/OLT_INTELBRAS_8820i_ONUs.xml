<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2021-08-04T18:21:04Z</date>
    <groups>
        <group>
            <name>OLT INTELBRAS GPON</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>OLT_INTELBRAS_8820i_Contadores</template>
            <name>OLT_INTELBRAS_8820i_Contadores</name>
            <description>Contagem de onus off, online, na olt ou por pon</description>
            <groups>
                <group>
                    <name>OLT INTELBRAS GPON</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>onu online por pon</name>
                </application>
                <application>
                    <name>onu total online</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Coleta Dados Onus</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>discovery[{#PON},1.3.6.1.4.1.26138.1.2.1.1.1.2, {#ACT},1.3.6.1.4.1.26138.1.2.1.1.1.5]</snmp_oid>
                    <key>coleta.dados.onus</key>
                    <delay>5m</delay>
                    <history>1d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <preprocessing>
                        <step>
                            <type>STR_REPLACE</type>
                            <params>{#PON}
PON</params>
                        </step>
                        <step>
                            <type>STR_REPLACE</type>
                            <params>{#ACT}
ACT</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 1</name>
                    <type>DEPENDENT</type>
                    <key>online.pon1</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '1' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 2</name>
                    <type>DEPENDENT</type>
                    <key>online.pon2</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '2' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 3</name>
                    <type>DEPENDENT</type>
                    <key>online.pon3</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '3' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 4</name>
                    <type>DEPENDENT</type>
                    <key>online.pon4</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '4' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 5</name>
                    <type>DEPENDENT</type>
                    <key>online.pon5</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '5' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 6</name>
                    <type>DEPENDENT</type>
                    <key>online.pon6</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '6' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 7</name>
                    <type>DEPENDENT</type>
                    <key>online.pon7</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '7' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>TOTAL ONLINE PON 8</name>
                    <type>DEPENDENT</type>
                    <key>online.pon8</key>
                    <delay>0</delay>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>onu online por pon</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$.[?(@.PON == '8' &amp;&amp; @.ACT == '1')].length()</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>coleta.dados.onus</key>
                    </master_item>
                </item>
                <item>
                    <name>Total Online</name>
                    <type>CALCULATED</type>
                    <key>onu.total.online</key>
                    <delay>5m</delay>
                    <history>30d</history>
                    <trends>30d</trends>
                    <params>last(&quot;online.pon1&quot;) + last(&quot;online.pon2&quot;) + last(&quot;online.pon3&quot;) + last(&quot;online.pon4&quot;) + last(&quot;online.pon5&quot;) + last(&quot;online.pon6&quot;) + last(&quot;online.pon7&quot;) + last(&quot;online.pon8&quot;)</params>
                    <applications>
                        <application>
                            <name>onu total online</name>
                        </application>
                    </applications>
                </item>
            </items>
        </template>
        <template>
            <template>OLT_INTELBRAS_8820i_Interfaces</template>
            <name>OLT_INTELBRAS_8820i_Interfaces</name>
            <groups>
                <group>
                    <name>OLT INTELBRAS GPON</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>bias</name>
                </application>
                <application>
                    <name>interface</name>
                </application>
                <application>
                    <name>rx power</name>
                </application>
                <application>
                    <name>status</name>
                </application>
                <application>
                    <name>temperatura</name>
                </application>
                <application>
                    <name>tx power</name>
                </application>
                <application>
                    <name>voltagem</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>Discovery Interfaces (eth)</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>discovery[{#NAME},1.3.6.1.4.1.26138.1.1.1.1.1.2]</snmp_oid>
                    <key>discovery.interfaces.eth</key>
                    <delay>10m</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>^eth</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Interface Status - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>interface.eth.status[{#NAME}]</key>
                            <delay>3m</delay>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>status</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Discovery Interfaces (gpon)</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>discovery[{#NAME},1.3.6.1.4.1.26138.1.1.1.1.1.2]</snmp_oid>
                    <key>discovery.interfaces.gpon</key>
                    <delay>10m</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>gpon</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Interface Status - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>interface.gpon.status[{#NAME}]</key>
                            <delay>2m</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>status</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Interface SFP Rx Power - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.4.1.26138.1.1.1.1.1.10.{#SNMPINDEX}</snmp_oid>
                            <key>sfpStatusIfRxPower[{#NAME}]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>dBm</units>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>rx power</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>0.1</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Interface SFP Temperatura - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.4.1.26138.1.1.1.1.1.6.{#SNMPINDEX}</snmp_oid>
                            <key>sfpStatusIfTemperature[{#NAME}]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>°C</units>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>temperatura</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Interface SFP Tx Bias - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.4.1.26138.1.1.1.1.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>sfpStatusIfTxBias[{#NAME}]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>mA</units>
                            <applications>
                                <application>
                                    <name>bias</name>
                                </application>
                                <application>
                                    <name>interface</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Interface SFP Tx Power - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.4.1.26138.1.1.1.1.1.9.{#SNMPINDEX}</snmp_oid>
                            <key>sfpStatusIfTxPower[{#NAME}]</key>
                            <delay>3m</delay>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>dBm</units>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>tx power</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>0.1</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Interface SFP Voltagem - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.4.1.26138.1.1.1.1.1.7.{#SNMPINDEX}</snmp_oid>
                            <key>sfpStatusIfVoltage[{#NAME}]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>volt</units>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>voltagem</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>0.001</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                    </item_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Discovery Interfaces (xeth)</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>discovery[{#NAME},1.3.6.1.4.1.26138.1.1.1.1.1.2]</snmp_oid>
                    <key>discovery.interfaces.xeth</key>
                    <delay>10m</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>^xeth</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Interface Status - {#NAME}</name>
                            <type>SNMP_AGENT</type>
                            <snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>interface.xeth.status[{#NAME}]</key>
                            <delay>3m</delay>
                            <description>1 = ativo&#13;
2 = inativo</description>
                            <applications>
                                <application>
                                    <name>interface</name>
                                </application>
                                <application>
                                    <name>status</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                </discovery_rule>
            </discovery_rules>
        </template>
        <template>
            <template>OLT_INTELBRAS_8820i_ONUs</template>
            <name>OLT_INTELBRAS_8820i_ONUs</name>
            <groups>
                <group>
                    <name>OLT INTELBRAS GPON</name>
                </group>
            </groups>
        </template>
        <template>
            <template>OLT_INTELBRAS_8820i_Operacional</template>
            <name>OLT_INTELBRAS_8820i_Operacional</name>
            <description>Uptime&#13;
Memoria Total&#13;
Memoria Livre&#13;
CPU</description>
            <groups>
                <group>
                    <name>OLT INTELBRAS GPON</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>geral</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>CPU</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.2021.11.9.0</snmp_oid>
                    <key>cpuUsage</key>
                    <delay>5m</delay>
                    <trends>90d</trends>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>geral</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;80</expression>
                            <name>Alerta CPU</name>
                            <opdata>CPU acima de 80%</opdata>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Memoria Livre</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.2021.4.6.0</snmp_oid>
                    <key>memFree</key>
                    <delay>8m</delay>
                    <trends>90d</trends>
                    <units>kb</units>
                    <applications>
                        <application>
                            <name>geral</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Memoria Total</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.2021.4.5.0</snmp_oid>
                    <key>memTotal</key>
                    <delay>3h</delay>
                    <history>30d</history>
                    <trends>30d</trends>
                    <units>KB</units>
                    <applications>
                        <application>
                            <name>geral</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Uptime</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid>
                    <key>uptime</key>
                    <delay>3m</delay>
                    <trends>90d</trends>
                    <units>uptime</units>
                    <applications>
                        <application>
                            <name>geral</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.01</params>
                        </step>
                    </preprocessing>
                </item>
            </items>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{OLT_INTELBRAS_8820i_Contadores:online.pon1.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon2.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon3.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon4.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon5.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon6.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon7.last()}&gt;120 or {OLT_INTELBRAS_8820i_Contadores:online.pon8.last()}&gt;120</expression>
            <name>Alerta de Limite da PON</name>
            <opdata>Mais de 120 ONU's na PON</opdata>
            <priority>AVERAGE</priority>
            <manual_close>YES</manual_close>
        </trigger>
    </triggers>
</zabbix_export>
